!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("history")):"function"==typeof define&&define.amd?define(["exports","react","history"],t):t((e=e||self).ReactRouter={},e.React,e.HistoryLibrary)}(this,(function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!e)throw new Error(t)}var u=t.createContext(null),i=t.createContext({static:!1}),o=t.createContext({outlet:null,params:{},pathname:"",basename:"",route:null});function c(e){return p()}function l(e){var r=e.children,o=void 0===r?null:r,c=e.action,l=void 0===c?n.Action.Pop:c,f=e.location,h=e.navigator,p=e.static,v=void 0!==p&&p;return s()&&a(!1),t.createElement(u.Provider,{value:h},t.createElement(i.Provider,{children:o,value:{action:l,location:f,static:v}}))}function s(){return null!=t.useContext(i).location}function f(){return s()||a(!1),t.useContext(i).location}function h(){s()||a(!1);var e=t.useContext(u),n=t.useContext(o),r=n.pathname,i=n.basename,c=t.useRef(!1);return t.useEffect((function(){c.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),c.current)if("number"==typeof t)e.go(t);else{var a=b(t,r,i);(n.replace?e.replace:e.push)(a,n.state)}}),[i,e,r])}function p(){return t.useContext(o).outlet}function v(e){var n=t.useContext(o),r=n.pathname,a=n.basename;return t.useMemo((function(){return b(e,r,a)}),[e,r,a])}function d(e,n,a){void 0===a&&(a="");var u=t.useContext(o),i=(u.route,u.pathname),c=u.params;a=a?S([i,a]):i;var l=t.useMemo((function(){return y(e,n,a)}),[n,e,a]);return l?l.reduceRight((function(e,n){var u=n.params,i=n.pathname,l=n.route;return t.createElement(o.Provider,{children:l.element,value:{outlet:e,params:r({},c,u),pathname:S([a,i]),basename:a,route:l}})}),null):null}function m(e){return e.map((function(e){var n={path:e.path||"/",caseSensitive:!0===e.caseSensitive,element:e.element||t.createElement(c,null)};return e.children&&(n.children=m(e.children)),n}))}function g(e){var n=[];return t.Children.forEach(e,(function(e){if(t.isValidElement(e))if(e.type!==t.Fragment){var r={path:e.props.path||"/",caseSensitive:!0===e.props.caseSensitive,element:e};if(e.props.children){var a=g(e.props.children);a.length&&(r.children=a)}n.push(r)}else n.push.apply(n,g(e.props.children))})),n}function y(e,t,a){void 0===a&&(a=""),"string"==typeof t&&(t=n.parsePath(t));var u=t.pathname||"/";if(a){var i=a.replace(/^\/*/,"/").replace(/\/+$/,"");if(!u.startsWith(i))return null;u=u===i?"/":u.slice(i.length)}var o=function e(t,n,a,u,i){void 0===n&&(n=[]);void 0===a&&(a="");void 0===u&&(u=[]);void 0===i&&(i=[]);return t.forEach((function(t,o){t=r({},t,{path:t.path||"/",caseSensitive:!!t.caseSensitive,element:t.element});var c=S([a,t.path]),l=u.concat(t),s=i.concat(o);t.children&&e(t.children,n,c,l,s),n.push([c,l,s])})),n}(e);!function(e){var t=e.reduce((function(e,t){var n=t[0];return e[n]=function(e){var t=e.split("/"),n=t.length;t.some(C)&&(n+=-2);return t.filter((function(e){return!C(e)})).reduce((function(e,t){return e+(x.test(t)?2:""===t?1:10)}),n)}(n),e}),{});n=e,r=function(e,n){var r=e[0],a=e[2],u=t[r],i=n[0],o=n[2],c=t[i];return u!==c?c-u:function(e,t){return e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}))?e[e.length-1]-t[t.length-1]:0}(a,o)},a=n.slice(0),n.sort((function(e,t){return r(e,t)||a.indexOf(e)-a.indexOf(t)}));var n,r,a}(o);for(var c=null,l=0;null==c&&l<o.length;++l)c=E(o[l],u);return c}var x=/^:\w+$/,C=function(e){return"*"===e};function E(e,t){for(var n=e[1],a="/",u={},i=[],o=0;o<n.length;++o){var c=n[o],l="/"===a?t:t.slice(a.length)||"/",s=R({path:c.path,caseSensitive:c.caseSensitive,end:o===n.length-1},l);if(!s)return null;a=S([a,s.pathname]),u=r({},u,s.params),i.push({route:c,pathname:a,params:u})}return i}function R(e,t){"string"==typeof e&&(e={path:e});var n=e,r=n.path,a=n.caseSensitive,u=void 0!==a&&a,i=n.end,o=function(e,t,n){var r=[],a="^("+e.replace(/^\/*/,"/").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}))+")";e.endsWith("*")?(e.endsWith("/*")?a+="(?:\\/(.+)|\\/?)":a+="(.*)",r.push("*")):n&&(a+="\\/?");n&&(a+="$");var u=t?void 0:"i";return[new RegExp(a,u),r]}(r,u,void 0===i||i),c=o[0],l=o[1],s=t.match(c);if(!s)return null;var f=s[1],h=s.slice(2);return{path:r,pathname:f,params:l.reduce((function(e,t,n){return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(h[n]||""),e}),{})}}function b(e,t,r){void 0===t&&(t="/"),void 0===r&&(r="");var a="string"==typeof e?n.parsePath(e):e,u=a.pathname,i=a.search,o=void 0===i?"":i,c=a.hash,l=void 0===c?"":c;return{pathname:u?function(e,t){var n=O((r=t,r.replace(/\/+$/,"")));var r;return O(e).forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?S(n):"/"}(u,u.startsWith("/")?r?P("/"+r):"/":t):t,search:o,hash:l}}var P=function(e){return e.replace(/\/\/+/g,"/")},S=function(e){return P(e.join("/"))},O=function(e){return P(e).split("/")};e.MemoryRouter=function(e){var r=e.children,a=e.initialEntries,u=e.initialIndex,i=t.useRef();null==i.current&&(i.current=n.createMemoryHistory({initialEntries:a,initialIndex:u}));var o=i.current,c=t.useState({action:o.action,location:o.location}),s=c[0],f=c[1];return t.useLayoutEffect((function(){return o.listen(f)}),[o]),t.createElement(l,{children:r,action:s.action,location:s.location,navigator:o})},e.Navigate=function(e){var n=e.to,r=e.replace,u=e.state;s()||a(!1);var i=h();return t.useEffect((function(){i(n,{replace:r,state:u})})),null},e.Outlet=c,e.Route=function(e){var n=e.element;return void 0===n?t.createElement(c,null):n},e.Router=l,e.Routes=function(e){var t=e.basename,n=void 0===t?"":t;return d(g(e.children),f(),n)},e.UNSAFE_LocationContext=i,e.UNSAFE_NavigatorContext=u,e.UNSAFE_RouteContext=o,e.createRoutesFromArray=m,e.createRoutesFromChildren=g,e.generatePath=function(e,t){return void 0===t&&(t={}),e.replace(/:(\w+)/g,(function(e,n){return null==t[n]&&a(!1),t[n]})).replace(/\/*\*$/,(function(e){return null==t["*"]?"":t["*"].replace(/^\/*/,"/")}))},e.matchPath=R,e.matchRoutes=y,e.resolvePath=b,e.useBlocker=function(e,n){void 0===n&&(n=!0),s()||a(!1);var i=t.useContext(u);t.useEffect((function(){if(n){var t=i.block((function(n){var a=r({},n,{retry:function(){t(),n.retry()}});e(a)}));return t}}),[i,e,n])},e.useHref=function(e){s()||a(!1);var n=t.useContext(u),r=v(e);return n.createHref(r)},e.useInRouterContext=s,e.useLocation=f,e.useMatch=function(e){return s()||a(!1),R(e,f().pathname)},e.useNavigate=h,e.useOutlet=p,e.useParams=function(){return t.useContext(o).params},e.useResolvedPath=v,e.useRoutes=function(e,n){void 0===n&&(n=""),s()||a(!1);var r=f();return d(t.useMemo((function(){return m(e)}),[e]),r,n)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-router.production.min.js.map
